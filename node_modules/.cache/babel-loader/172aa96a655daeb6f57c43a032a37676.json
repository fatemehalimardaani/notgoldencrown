{"ast":null,"code":"import _objectSpread from \"/Users/fatemeh/Documents/document/toturials/complete-react-developer/crwn-clothing/heroku/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/fatemeh/Documents/document/toturials/complete-react-developer/crwn-clothing/heroku/src/App.js\";\nimport React, { useRef } from 'react';\nimport './App.css';\nimport { Route, Switch, Link, Redirect } from 'react-router-dom';\nimport HomePage from './pages/homepage/homepage.component';\nimport ShopPage from './pages/shop/shop.component';\nimport Header from \"./components/header/header\";\nimport SignInSignUp from './pages/signin-signup/signin-signup';\nimport { userAction } from './redux/user/user-action';\nimport { connect } from 'react-redux';\nimport { auth, createUserProfileDocument } from './components/firebase/firebase.utils';\nimport { selectCurrentUser } from './redux/user/user.selector';\nimport Checkout from './pages/checkout/checkout';\n\nclass App extends React.Component {\n  componentDidMount() {\n    const setCurrentUser = this.props.setCurrentUser;\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async user => {\n      if (user) {\n        const userRef = await createUserProfileDocument(user);\n        userRef.onSnapshot(snapShot => {\n          setCurrentUser(_objectSpread({\n            id: snapShot.id\n          }, snapShot.data()));\n        });\n      }\n\n      setCurrentUser(user);\n      console.log(user);\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: HomePage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/shop\",\n      component: ShopPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/contact\",\n      component: HomePage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/signin\",\n      render: () => this.props.currentUser ? React.createElement(Redirect, {\n        to: \"/\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }) : React.createElement(SignInSignUp, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }),\n      component: SignInSignUp,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43\n      },\n      __self: this\n    }), React.createElement(Route, {\n      exact: true,\n      path: \"/checkout\",\n      component: Checkout,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    })));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  setCurrentUser: selectCurrentUser(state)\n});\n\nconst mapDispatchToPops = dispatch => ({\n  setCurrentUser: user => dispatch(userAction(user))\n});\n\nexport default connect(mapStateToProps, mapDispatchToPops)(App);","map":{"version":3,"sources":["/Users/fatemeh/Documents/document/toturials/complete-react-developer/crwn-clothing/heroku/src/App.js"],"names":["React","useRef","Route","Switch","Link","Redirect","HomePage","ShopPage","Header","SignInSignUp","userAction","connect","auth","createUserProfileDocument","selectCurrentUser","Checkout","App","Component","componentDidMount","setCurrentUser","props","unsubscribeFromAuth","onAuthStateChanged","user","userRef","onSnapshot","snapShot","id","data","console","log","componentWillUnmount","render","currentUser","mapStateToProps","state","mapDispatchToPops","dispatch"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\nimport './App.css';\nimport {Route,Switch,Link,Redirect} from 'react-router-dom'\nimport HomePage from './pages/homepage/homepage.component';\nimport ShopPage from './pages/shop/shop.component';\nimport Header from \"./components/header/header\";\nimport SignInSignUp from './pages/signin-signup/signin-signup';\nimport {userAction} from './redux/user/user-action'\nimport { connect } from 'react-redux';\nimport { auth, createUserProfileDocument } from './components/firebase/firebase.utils';\nimport { selectCurrentUser } from './redux/user/user.selector';\nimport Checkout from './pages/checkout/checkout'\nclass App extends React.Component{\n    \n    componentDidMount() {\n        const {setCurrentUser} =this.props\n        this.unsubscribeFromAuth=auth.onAuthStateChanged (async user=>{\n            if(user){\n                const userRef=await createUserProfileDocument(user)\n                userRef.onSnapshot(snapShot => {\n                    setCurrentUser({\n                      id: snapShot.id,\n                      ...snapShot.data()\n                    });\n                  });\n\n            }\n            setCurrentUser(user)\n            console.log(user);\n        })\n    }\n    componentWillUnmount() {\n        this.unsubscribeFromAuth()\n    }\n    render(){\n        return (\n            <div>\n                <Header/>\n                <Switch>\n                    <Route exact  path=\"/\" component={HomePage} />\n                    <Route  path=\"/shop\" component={ShopPage} />\n                    <Route  path=\"/contact\" component={HomePage} />\n                    <Route exact path=\"/signin\" render={()=>this.props.currentUser ? <Redirect to=\"/\"/> : <SignInSignUp/>} component={SignInSignUp} />\n                    <Route exact  path=\"/checkout\" component={Checkout} />\n                </Switch>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps=(state)=>({\n    setCurrentUser:selectCurrentUser(state)\n})\n\nconst mapDispatchToPops=dispatch=>({\n    setCurrentUser:user=>dispatch(userAction(user))\n})\nexport default connect(mapStateToProps,mapDispatchToPops)(App);\n"]},"metadata":{},"sourceType":"module"}